
&НаКлиенте
Процедура ирОтладить(Команда)
    
    #Если ТонкийКлиент Или ВебКлиент Тогда
        ОткрытьФорму("Отчет.ирКонсольКомпоновокДанных.Форма");
        Возврат;
    #Иначе
    СхемаКомпоновки = ПолучитьИзВременногоХранилища(ПолучитьАдресСхемы());
    ирОбщий.ОтладитьЛкс(СхемаКомпоновки,, ЭтаФорма.Отчет.КомпоновщикНастроек.ПолучитьНастройки());
    #КонецЕсли
    
КонецПроцедуры

&НаСервере
Функция ПолучитьАдресСхемы() 
    Если ЭтаФорма.НастройкиОтчета.СхемаМодифицирована Тогда
        АдресСхемы = ЭтаФорма.НастройкиОтчета.АдресСхемы;
    Иначе
        ОтчетОбъект = РеквизитФормыВЗначение("Отчет");
        #Если Сервер И Не Сервер Тогда
            ОтчетОбъект = Отчеты.ирКонсольКомпоновокДанных.Создать();
        #КонецЕсли
        АдресСхемы = ПоместитьВоВременноеХранилище(ОтчетОбъект.СхемаКомпоновкиДанных);
    КонецЕсли;
    Возврат АдресСхемы;
КонецФункции

&НаСервере
Процедура ирПриСозданииНаСервереПосле(Отказ, СтандартнаяОбработка)
	
	Кнопка = Элементы.Добавить("ирОтладитьИР", Тип("КнопкаФормы"), Элементы.ГруппаВывод);
	Кнопка.ИмяКоманды = "ирОтладить";
	
КонецПроцедуры

